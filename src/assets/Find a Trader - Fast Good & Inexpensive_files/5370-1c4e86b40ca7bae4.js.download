"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5370],{15370:(t,e,a)=>{a.d(e,{Ay:()=>k,Cz:()=>p,Gc:()=>u,Jr:()=>d,LP:()=>h,PP:()=>I,Q$:()=>C,bE:()=>c,dt:()=>s,mR:()=>m,nK:()=>l,sX:()=>r,vD:()=>y,wV:()=>g});let o=(0,a(48943).Z0)({name:"cart",initialState:{nonDcCheckoutItems:[],dcCheckoutItems:[],conditionForDcCheckoutItems:!1,conditionForNonDcCheckoutItems:!1,conditionForBoth:!1,cartData:{},diyCartItems:{directCheckoutItems:[],nonDirectCheckoutItems:[]},cartTotalQuantity:0,cartTotalAmount:0},reducers:{hydrateCart:t=>{{let e=localStorage.getItem("diyCartItems");if(e){let a=JSON.parse(e);t.diyCartItems=a,console.log("Updated diyCartItems:",t.diyCartItems)}}},SetCartData:(t,e)=>{t.cartData=e.payload},addToCart(t,e){let a=localStorage.getItem("diyCartItems"),o=a?JSON.parse(a):{directCheckoutItems:[],nonDirectCheckoutItems:[]};t.diyCartItems=o;let i=e.payload.directCheckout?"directCheckoutItems":"nonDirectCheckoutItems",c=t.diyCartItems[i]?[...t.diyCartItems[i]]:[],r=c.findIndex(t=>{var a,o;return t._id===e.payload._id&&t.cornerType===e.payload.cornerType&&t.edgeType===e.payload.edgeType&&(null===(a=t.edgeSide)||void 0===a?void 0:a.value)===(null===(o=e.payload.edgeSide)||void 0===o?void 0:o.value)&&t.cornerSide===e.payload.cornerSide&&t.length===e.payload.length&&t.width===e.payload.width&&t.thickness===e.payload.thickness});if(r>=0)c[r]={...c[r],cartQuantity:c[r].cartQuantity+1};else{let t={...e.payload,cartQuantity:e.payload.cartQuantity?e.payload.cartQuantity:1};c.push(t)}t.diyCartItems[i]=c,localStorage.setItem("diyCartItems",JSON.stringify(t.diyCartItems))},decreaseCart(t,e){let a=e.payload.directCheckout,o=a?"directCheckoutItems":"nonDirectCheckoutItems",i=t.diyCartItems[o]?[...t.diyCartItems[o]]:[],c=i.findIndex(t=>t._id===e.payload._id&&t.edgeType===e.payload.edgeType&&t.edgeSide.value===e.payload.edgeSide&&t.radiusType===e.payload.radiusType&&t.length===e.payload.length&&t.cornerSide===e.payload.cornerSide&&t.width===e.payload.width&&t.thickness===e.payload.thickness);c>=0&&(i[c].cartQuantity>1?i[c].cartQuantity-=1:i.splice(c,1),localStorage.setItem("diyCartItems",JSON.stringify(t.diyCartItems)),a?localStorage.setItem("dcCheckoutItems",JSON.stringify(t.diyCartItems.directCheckoutItems)):localStorage.setItem("nonDcCheckoutItems",JSON.stringify(t.diyCartItems.nonDirectCheckoutItems)))},increaseCart(t,e){console.log("checking state val",t),console.log("checking action val",e);let a=e.payload.directCheckout,o=a?"directCheckoutItems":"nonDirectCheckoutItems",i=t.diyCartItems[o]?[...t.diyCartItems[o]]:[];console.log("increase cart target array",i);let c=i.findIndex(t=>(console.log("checking edge side",t.edgeSide.value,e.payload.edgeSide),t._id===e.payload._id&&t.edgeType===e.payload.edgeType&&t.edgeSide.value===e.payload.edgeSide&&t.radiusType===e.payload.radiusType&&t.length===e.payload.length&&t.cornerSide===e.payload.cornerSide&&t.width===e.payload.width&&t.thickness===e.payload.thickness));console.log("items index value checking",c),c>=0&&i[c].cartQuantity<20&&(i[c].cartQuantity+=1,t.diyCartItems[o]=i,localStorage.setItem("diyCartItems",JSON.stringify(t.diyCartItems)),a?localStorage.setItem("dcCheckoutItems",JSON.stringify(t.diyCartItems.directCheckoutItems)):localStorage.setItem("nonDcCheckoutItems",JSON.stringify(t.diyCartItems.nonDirectCheckoutItems)))},removeFromCart(t,e){let a=e.payload.directCheckout,o=a?"directCheckoutItems":"nonDirectCheckoutItems";t.diyCartItems[o]=t.diyCartItems[o].filter(t=>!(t._id===e.payload._id&&t.edgeType===e.payload.edgeType&&t.edgeSide.value===e.payload.edgeSide&&t.radiusType===e.payload.radiusType&&t.length===e.payload.length&&t.cornerSide===e.payload.cornerSide&&t.width===e.payload.width&&t.thickness===e.payload.thickness)),localStorage.setItem("diyCartItems",JSON.stringify(t.diyCartItems));let{directCheckoutItems:i=[],nonDirectCheckoutItems:c=[]}=t.diyCartItems,r=i.reduce((t,e)=>t+parseFloat(e.price)*e.cartQuantity,0),d=c.reduce((t,e)=>t+parseFloat(e.price)*e.cartQuantity,0);t.cartTotalQuantity=i.length+c.length,t.cartTotalAmount=parseFloat((r+d).toFixed(2)),a?localStorage.removeItem("dcCheckoutItems"):localStorage.removeItem("nonDcCheckoutItems")},getTotals(t){let{directCheckoutItems:e,nonDirectCheckoutItems:a}=t.diyCartItems,o=a.reduce((t,e)=>{let a=parseFloat(e.price)*e.cartQuantity;return t.total+=a,t.quantity+=e.cartQuantity,t},{total:0,quantity:0}),i=e.map(t=>t.directCheckout),c=a.map(t=>t.directCheckout),r=[...new Set(i)],d=[...new Set(c)],n=r.length>0?r[0]:null,l=d.length>0?d[0]:null,s=e.reduce((t,e)=>{let a=parseFloat(e.price)*e.cartQuantity;return t.total+=a,t.quantity+=e.cartQuantity,t},{total:0,quantity:0}),y=parseFloat(o.total.toFixed(2)),u=o.quantity,m=parseFloat(s.total.toFixed(2)),h=s.quantity;t.directCheckout={directCheckoutItems:e,directCheckoutTotalAmount:m,directCheckoutTotalQuantity:h,directCheckout:n},t.nonDirectCheckout={nonDirectCheckoutItems:a,nonDirectCheckoutTotalAmount:y,nonDirectCheckoutTotalQuantity:u,directCheckout:l},t.cartTotalAmount=m+y,t.cartTotalQuantity=h+u},clearCart(t){t.diyCartItems.directCheckoutItems=[],t.diyCartItems.nonDirectCheckoutItems=[],t.directCheckout={directCheckoutItems:[],directCheckoutTotalAmount:0,directCheckoutTotalQuantity:0,directCheckout:null},t.nonDirectCheckout={nonDirectCheckoutItems:[],nonDirectCheckoutTotalAmount:0,nonDirectCheckoutTotalQuantity:0,directCheckout:null},t.cartTotalQuantity=0,t.cartTotalAmount=0,localStorage.setItem("diyCartItems",JSON.stringify(t.diyCartItems))},clearDirectCheckoutItems(t){t.diyCartItems.directCheckoutItems=[],t.directCheckout={directCheckoutItems:[],directCheckoutTotalAmount:0,directCheckoutTotalQuantity:0,directCheckout:null},t.cartTotalQuantity=t.nonDirectCheckoutTotalQuantity,t.cartTotalAmount=t.nonDirectCheckoutTotalAmount,localStorage.setItem("diyCartItems",JSON.stringify(t.diyCartItems)),window.localStorage.removeItem("dcCheckoutItems")},clearNonDirectCheckoutItems(t){t.diyCartItems.nonDirectCheckoutItems=[],t.nonDirectCheckout={nonDirectCheckoutItems:[],nonDirectCheckoutTotalAmount:0,nonDirectCheckoutTotalQuantity:0,directCheckout:null},t.cartTotalQuantity=t.directCheckoutTotalQuantity,t.cartTotalAmount=t.directCheckoutTotalAmount,localStorage.setItem("diyCartItems",JSON.stringify(t.diyCartItems)),window.localStorage.removeItem("nonDcCheckoutItems")},addItemDirectCheckoutItems:(t,e)=>{let a=JSON.parse(localStorage.getItem("dcCheckoutItems"))||[];(Array.isArray(e.payload)?e.payload:[e.payload]).forEach(t=>{let e=a.find(e=>{var a,o;return e._id===t._id&&e.cornerType===t.cornerType&&e.edgeType===t.edgeType&&(null===(a=e.edgeSide)||void 0===a?void 0:a.value)===(null===(o=t.edgeSide)||void 0===o?void 0:o.value)&&e.cornerSide===t.cornerSide&&e.length===t.length&&e.width===t.width&&e.thickness===t.thickness});e?console.log("Exact item already exists, not changing quantity:",e):(console.log("Adding new unique item to cart:",t),a.push({...t,cartQuantity:t.cartQuantity?t.cartQuantity:1}))}),t.dcCheckoutItems=[...a],localStorage.setItem("dcCheckoutItems",JSON.stringify(a))},addItemNonDirectCheckoutItems:(t,e)=>{let a=JSON.parse(localStorage.getItem("nonDcCheckoutItems"))||[];(Array.isArray(e.payload)?e.payload:[e.payload]).forEach(t=>{let e=a.find(e=>{var a,o;return e._id===t._id&&e.cornerType===t.cornerType&&e.edgeType===t.edgeType&&(null===(a=e.edgeSide)||void 0===a?void 0:a.value)===(null===(o=t.edgeSide)||void 0===o?void 0:o.value)&&e.cornerSide===t.cornerSide&&e.length===t.length&&e.width===t.width&&e.thickness===t.thickness});e?console.log("Exact item already exists, not changing quantity:",e):(console.log("Adding new unique item to cart:",t),a.push({...t,cartQuantity:t.cartQuantity?t.cartQuantity:1}))}),t.nonDcCheckoutItems=[...a],localStorage.setItem("nonDcCheckoutItems",JSON.stringify(a))},setConditionForDcOnly:(t,e)=>{t.conditionForDcCheckoutItems=e.payload,window.localStorage.setItem("conditionForDcCheckoutItems",JSON.stringify(e.payload))},setConditionForNonDcOnly:(t,e)=>{t.conditionForNonDcCheckoutItems=e.payload,window.localStorage.setItem("conditionForNonDcCheckoutItems",JSON.stringify(e.payload))},setConditionForBoth:(t,e)=>{t.conditionForBoth=e.payload,window.localStorage.setItem("conditionForBoth",JSON.stringify(e.payload))}}}),{SetCartData:i,addToCart:c,clearCart:r,decreaseCart:d,getTotals:n,increaseCart:l,removeFromCart:s,clearDirectCheckoutItems:y,clearNonDirectCheckoutItems:u,addItemDirectCheckoutItems:m,addItemNonDirectCheckoutItems:h,setConditionForDcOnly:C,setConditionForNonDcOnly:I,setConditionForBoth:g,hydrateCart:p}=o.actions,k=o.reducer}}]);